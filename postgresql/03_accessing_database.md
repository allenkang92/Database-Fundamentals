# PostgreSQL 데이터베이스 접근

## 1. 데이터베이스 연결

### 1.1 연결 방법
- psql 명령행 도구
- GUI 도구
- 프로그래밍 언어 인터페이스

데이터베이스를 생성한 후에는 다음과 같은 방법으로 접근할 수 있습니다:

PostgreSQL 대화형 터미널 프로그램인 psql을 실행하여 SQL 명령어를 대화형으로 입력, 편집 및 실행할 수 있습니다.

pgAdmin과 같은 기존의 그래픽 프론트엔드 도구나 ODBC 또는 JDBC 지원이 있는 오피스 제품군을 사용하여 데이터베이스를 생성하고 조작할 수 있습니다. 이러한 가능성은 이 튜토리얼에서 다루지 않습니다.

여러 가지 사용 가능한 언어 바인딩 중 하나를 사용하여 커스텀 애플리케이션을 작성할 수 있습니다. 이러한 가능성은 Part IV에서 더 자세히 논의됩니다.

### 1.2 연결 매개변수
- 호스트명
- 포트
- 데이터베이스 이름
- 사용자 이름
- 비밀번호

아마도 이 튜토리얼의 예제를 시도해보기 위해 psql을 시작하고 싶을 것입니다. 다음 명령을 입력하여 mydb 데이터베이스에 대해 psql을 활성화할 수 있습니다:

$ psql mydb
데이터베이스 이름을 지정하지 않으면 사용자 계정 이름이 기본값으로 사용됩니다. 이전 섹션에서 createdb을 사용하여 이 체계를 이미 확인했습니다.

## 2. psql 사용하기

### 2.1 기본 명령어
- \l: 데이터베이스 목록
- \c: 데이터베이스 연결
- \d: 테이블 목록
- \q: 종료

psql을 실행하면 다음과 같은 메시지가 표시됩니다:

psql (17.2)
도움말을 보려면 "help"를 입력하세요.

mydb=>
마지막 줄은 다음과 같을 수도 있습니다:

mydb=#
이는 데이터베이스 슈퍼유저임을 의미하며, PostgreSQL 인스턴스를 직접 설치한 경우 대부분 그렇습니다. 슈퍼유저라는 것은 접근 제어를 받지 않는다는 뜻입니다. 이 튜토리얼에서는 중요하지 않습니다.

psql을 시작할 때 문제가 발생하면 이전 섹션으로 돌아가세요. createdb와 psql의 진단은 유사하며, 전자가 작동했다면 후자도 작동해야 합니다.

psql이 마지막으로 출력하는 줄은 프롬프트이며, 이는 psql이 사용자의 입력을 듣고 있으며 psql이 유지하는 작업 공간에 SQL 쿼리를 입력할 수 있음을 나타냅니다. 다음 명령어를 시도해보세요:

mydb=> SELECT version();
                                             version
    -------------------------------------------------------------------​-----------------------
     PostgreSQL 17.2 on x86_64-pc-linux-gnu, compiled by gcc (Debian 4.9.2-10) 4.9.2, 64-bit
    (1 row)
    
    mydb=> SELECT current_date;
        date
    ------------
     2016-01-07
    (1 row)
    
    mydb=> SELECT 2 + 2;
     ?column?
    ----------
            4
    (1 row)

### 2.2 고급 기능
- 쿼리 실행
- 스크립트 실행
- 메타 명령어

psql 프로그램에는 SQL 명령어가 아닌 내부 명령어가 여러 개 있습니다. 이들은 백슬래시 문자 \"\\\"로 시작합니다. 예를 들어, 다양한 PostgreSQL SQL 명령어의 구문에 대한 도움말을 얻으려면 다음을 입력할 수 있습니다:

mydb=> \h
psql을 종료하려면 다음을 입력하세요:

mydb=> \q
그러면 psql이 종료되고 명령 셸로 돌아갑니다. (더 많은 내부 명령어는 psql 프롬프트에서 \?를 입력하세요.) psql의 모든 기능은 psql 문서에 자세히 나와 있습니다. 이 튜토리얼에서는 이 기능들을 명시적으로 사용하지 않지만, 필요할 때 유용하게 사용할 수 있습니다.

## 3. 접근 제어

### 3.1 인증 방식
- 패스워드 인증
- LDAP
- GSSAPI
- Peer 인증
- Ident 인증

### 3.2 접근 권한
- 데이터베이스 레벨
- 스키마 레벨
- 테이블 레벨
- 컬럼 레벨

## 4. 연결 관리

### 4.1 연결 풀링
- 연결 풀 설정
- 최대 연결 수
- 유휴 연결 관리

### 4.2 성능 최적화
- 연결 타임아웃
- 연결 재사용
- 부하 분산

## 5. 문제 해결

### 5.1 일반적인 문제
- 연결 거부
- 인증 실패
- 타임아웃

### 5.2 디버깅
- 로그 확인
- 연결 상태 확인
- 네트워크 문제 진단

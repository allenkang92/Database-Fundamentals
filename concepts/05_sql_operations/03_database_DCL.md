# 데이터 제어어 (Data Control Language, DCL)

## 1. DCL의 개념
- 데이터베이스의 보안, 무결성, 권한 제어를 위한 언어
- 데이터베이스 관리자가 사용하는 제어 명령어
- 사용자 권한 관리와 보안 설정에 사용

## 2. DCL 주요 명령어

### 2.1 GRANT
- 사용자에게 권한 부여
- 특정 객체에 대한 접근 권한 설정
- 시스템 권한과 객체 권한 부여

### 2.2 REVOKE
- 사용자의 권한 회수
- 부여된 권한 취소
- 시스템 및 객체 권한 회수

### 2.3 DENY
- 명시적 권한 거부
- GRANT로 부여된 권한 무시
- 상위 권한에 우선하는 거부

## 3. 데이터베이스 권한

### 3.1 시스템 권한
- 데이터베이스 시스템 관리 권한
- 사용자 생성 및 삭제
- 백업 및 복구 권한

### 3.2 객체 권한
- 특정 객체에 대한 작업 권한
- SELECT, INSERT, UPDATE, DELETE
- EXECUTE, REFERENCES 등

## 4. 권한 관리

### 4.1 권한 부여 구문
```sql
GRANT 권한 ON 객체 TO 사용자 [WITH GRANT OPTION];
```
- 권한: SELECT, INSERT 등
- 객체: 테이블, 뷰 등
- WITH GRANT OPTION: 권한 재부여 허용

### 4.2 권한 회수 구문
```sql
REVOKE 권한 ON 객체 FROM 사용자 [CASCADE];
```
- CASCADE: 연쇄적 권한 회수
- 부여된 모든 권한 취소
- 종속 권한도 함께 취소

## 5. 보안 관리

### 5.1 사용자 보안
- 인증과 권한 부여
- 패스워드 정책
- 접근 제어 목록

### 5.2 데이터 보안
- 암호화
- 감사(Audit)
- 백업 및 복구

### 5.3 네트워크 보안
- SSL/TLS 암호화
- 방화벽 설정
- 접근 IP 제한

## 6. 무결성 제어

### 6.1 개체 무결성
- 기본키 제약조건
- 중복값 방지
- NULL값 방지

### 6.2 참조 무결성
- 외래키 제약조건
- 관계 유지
- 데이터 일관성

### 6.3 도메인 무결성
- 데이터 타입
- 기본값
- CHECK 제약조건

## 7. 동시성 제어

### 7.1 락킹 (Locking)
- 공유 락 (Shared Lock)
- 배타적 락 (Exclusive Lock)
- 교착상태 방지

### 7.2 트랜잭션 격리 수준
- READ UNCOMMITTED
- READ COMMITTED
- REPEATABLE READ
- SERIALIZABLE

## 8. 뷰

### 8.1 뷰의 개념
- 사용자에게 접근이 허용된 자료만을 제한적으로 보여주기 위해 기본 테이블에서 유도되는 가상 테이블
- 실제 데이터를 저장하거나 변경하지 않으며, 기존의 데이터를 다양한 형태로 가공하여 제공할 수 있다.

### 8.2 뷰의 특징
- 뷰의 생성 시 CREATE문, 검색 시 SELECT문을 사용
- 뷰의 정의 변경 시 ALTER문을 사용할 수 없고 DROP문을 이용한다
- 뷰를 이용한 또 다른 뷰의 생성이 가능하다
- 하나의 뷰 제거 시 그 뷰를 기초로 정의된 다른 뷰도 함께 삭제된다.
- 뷰에 대한 조작에서 삽입, 갱신, 삭제 연산은 제약이 따른다.
- 뷰가 정의된 기본 테이블이 제거되면 뷰도 자동으로 제거된다.

### 8.3 뷰의 장단점
- 장점
  - 논리적 데이터 독립성 제공
  - 사용자 데이터 관리 편의성을 제공함
  - 데이터의 보안성
  - 데이터의 일관성
  - 데이터의 편의성
- 단점
  - ALTER VIEW 문으로 뷰의 정의 변경이 불가능함
  - 삽입, 갱신, 삭제 연산에 제약이 있음

## 9. 시스템 카탈로그

### 9.1 시스템 카탈로그의 개념
- 시스템 자신이 필요로 하는 여러 가지 객체(기본 테이블, 뷰, 인덱스, 데이터베이스, 패키지, 접근 권한 등)에 관한 정보를 포함하고 있는 시스템 데이터베이스
- 데이터 사전이라고도 한다.

### 9.2 시스템 카탈로그의 기능
- 테이블 정보 조회
- 뷰 정보 조회
- 인덱스 정보 조회
- 사용자 계정 정보 조회

## 10. 인덱스

### 10.1 인덱스의 개념
- 인덱스는 수많은 데이터 중에서 원하는 자료를 빠르고 효율적으로 검색하기 위해서 사용하는 방법
- 데이터베이스 성능에 많은 영향을 주는 DBMS의 구성 요소로 테이블과 클러스터에 연관되어 독립적인 저장 공간을 보유한다

### 10.2 인덱스의 구조
- 인덱스는 기본적으로 데이터의 위치(주소)를 관리, 기억하는 인덱스 파일과 실제 데이터를 기억하는 데이터 파일로 구성된다.
- 인덱스 파일은 [키값, 주소]의 두 가지 정보로 구성된다.
- 키값: 인덱스를 만들때 사용된 속성의 값, 주소: 실제로 자료가 저장된 위치

### 10.3 인덱스의 장단점
- 장점
  - 데이터 검색 속도의 향상
  - 시스템 부하 감소
  - 시스템 전체의 성능 향상
- 단점
  - 추가 DB 공간의 필요
  - 인덱스 생성 시간 소요
  - 잦은 변경 작업(Insert, Update, Delete)으로 인한 성능 저하

### 10.4 클러스터드 인덱스(Clustered Index)

#### 10.4.1 클러스터드 인덱스의 개념
- 테이블에서 하나의 속성을 기준으로 정렬시킨 후, 테이블을 재구성하여 인덱스를 만드는 방법
- 테이블의 물리적 순서(실제 순서)와 인덱스 순서가 동일
- 하나의 테이블에는 하나의 인덱스만 만들 수 있다.

#### 10.4.2 클러스터드 인덱스의 특징
- 재구성한 테이블을 일정한 크기로 나눠 Page 단위로 구성하고, 각 data page의 첫 번째 키값(대푯값)과 page 번호로 인덱스를 만든다
- page data: 페이지 단위로 나누어진 데이터가 저장, 관리되는 곳
- page 대푯값은 각 data page의 첫번째 키값으로 인덱스에서 하나의 대표값은 다음 대푯값 이전까지의 범위를 나타낸다

### 10.5 넌 클러스터드 인덱스(Non Clustered Index)

#### 10.5.1 넌 클러스터드 인덱스의 개념
- 넌 클러스터드 인덱스는 테이블을 재구성하지 않고, 데이터 주소로 인덱스를 만들어 주소값을 이용하여 검색하는 방법
- 넌 클러스터드 인덱스는 하나의 테이블에 여러 개의 인덱스를 만들 수 있다.

#### 10.5.2 넌 클러스터드 인덱스의 특징
- 한 개의 특정 값을 찾거나, 많은 양의 데이터 중에서 작은 범위를 찾을 때 유용
- 인덱스 구조보다 다소 복잡해질 수 있다.
- 키값과 데이터의 위치를 나타내는 ROW id로 구성된 인덱스 페이지를 만든다
- ROW id는 (page 그룹, data page 번호, 행 위치)로 구성된다.
- 인덱스 대푯값과 인덱스 page 번호로 구성된 ROOT 인덱스를 만든다.
# DDL (Data Definition Language)

## 1. DDL의 개념

**데이터 정의어(DDL)**는 데이터를 정의하는 언어로서 데이터를 담는 그릇을 정의하는 언어입니다.

테이블과 같은 데이터 구조를 정의하는 데 사용되는 명령어들로 특정 구조를 생성, 변경, 삭제, 이름을 바꾸는 데이터 구조와 관련된 명령어들을 데이터 정의어라고 부릅니다.

## 2. DDL의 대상

### 2.1 스키마 (Schema)

#### 스키마의 개념
스키마는 데이터베이스의 구조, 제약조건 등의 정보를 담고 있는 기본적인 구조입니다.
스키마는 외부/개념/내부 3계층으로 구성되어 있습니다.

#### 스키마의 구성

1. **외부 스키마 (External Schema)**
   - 사용자나 개발자의 관점에서 필요로 하는 데이터베이스의 논리적 구조
   - 사용자 뷰를 나타냄
   - 서브 스키마로 불림

2. **개념 스키마 (Conceptual Schema)**
   - 데이터베이스의 전체적인 논리적 구조
   - 전체적인 뷰를 나타냄
   - 개체 간의 관계, 제약조건, 접근 권한, 무결성, 보안에 대해 정의

3. **내부 스키마 (Internal Schema)**
   - 물리적 저장 장치의 관점에서 보는 데이터베이스 구조
   - 실제로 데이터베이스에 저장될 레코드의 형식을 정의
   - 저장 데이터 항목의 표현 방법, 내부 레코드의 물리적 순서 등을 표현

### 2.2 테이블 (Table)

#### 테이블의 개념
테이블은 데이터를 저장하는 항목인 필드(Field)들로 구성된 데이터의 집합체입니다.
하나의 DB 내에 여러 개의 테이블로 구성될 수 있고, 릴레이션(Relation) 혹은 엔터티(Entity)라고도 불립니다.

#### 테이블의 주요 용어

| 용어 | 설명 |
|------|------|
| **튜플(Tuple) / 행(Row)** | - 테이블 내의 행을 의미 (레코드라고도 함)<br>- 튜플은 테이블에서 같은 값을 가질 수 없음 |
| **속성(Attribute) / 열(Column)** | - 테이블 내의 열을 의미<br>- 열의 개수를 차수(Degree)라고 함 |
| **카디널리티(Cardinality)** | - 튜플(Tuple)의 개수 |
| **차수(Degree)** | - 속성(Attribute)의 개수 |
| **도메인(Domain)** | - 하나의 속성이 취할 수 있는 같은 타입의 원자값들의 집합 |

### 2.3 뷰 (View)

#### 뷰의 개념
- 뷰는 논리 테이블로서 사용자에게 테이블과 동일하게 사용됩니다
- 하나의 물리 테이블로부터 생성 가능하며, 다수의 테이블 또는 다른 뷰를 이용해 만들 수 있습니다
- 복잡한 조인 없이 단순한 질의어로 원하는 결과를 얻을 수 있습니다

#### 뷰의 장단점

**장점:**
- 논리적 독립성 제공
  - 데이터베이스에 영향을 주지 않고 원하는 형태로 데이터 접근 가능
- 데이터 조작 연산 간소화
  - 원하는 형태의 논리적 구조로 데이터 조작 연산을 간소화
- 보안 기능(접근제어) 제공
  - 특정 필드만 선택해 뷰를 생성하여 접근 제어 가능
  - 중요 보안 데이터 보호

**단점:**
- 뷰 자체 인덱스 불가
  - 논리적 구성이므로 독립적인 인덱스를 가질 수 없음
- 뷰 변경 제한
  - 정의 변경 시 삭제 후 재생성 필요
  - ALTER 문으로 변경 불가 (CREATE/DROP 문만 사용)
- 데이터 변경 제약
  - 뷰의 내용에 대한 삽입, 삭제, 변경에 제약 존재

## 3. 데이터베이스 파일 구조

### 3.1 순차 방법
- 레코드들의 물리적 순서가 논리적 순서와 같게 순차적으로 저장
- 가장 기본적인 파일 구조

### 3.2 인덱스 방법
- 인덱스가 가리키는 주소를 따라 원하는 레코드에 접근
- <키값:주소>의 쌍으로 구성
- 빠른 검색이 가능

### 3.3 해싱 방법
- 키값을 해시 함수(Hash Function)에 대입하여 주소 계산
- 계산된 주소로 레코드에 직접 접근

### 3.4 인덱스 (Index)

#### 인덱스의 개념
- 검색 연산의 최적화를 위한 데이터 구조
- 데이터를 빠르게 찾을 수 있는 수단
- 테이블의 특정 레코드 위치를 알려주는 용도

#### 인덱스의 특징
- 기본 키(PK) 컬럼은 자동으로 인덱스 생성
- 연월일이나 이름 기준 인덱스는 수동 생성 필요
- 인덱스가 없으면 테이블 전체 스캔(Table Full Scan) 발생
- 인덱스 존재 시 빠른 검색 가능(Index Range Scan)
- 조건절 '=' 비교 컬럼의 인덱스가 검색 속도 향상에 효과적

## 4. DDL 명령어

### 4.1 기본 명령어

| 명령어 | 용도 | 설명 |
|--------|------|------|
| **CREATE** | 생성 | 데이터베이스 오브젝트를 생성 |
| **ALTER** | 수정 | 데이터베이스 오브젝트 변경 |
| **DROP** | 삭제 | 데이터베이스 오브젝트를 삭제 |
| **TRUNCATE** | 내용 삭제 | 데이터베이스 오브젝트 내용 삭제 |

### 4.2 테이블 관련 DDL

#### CREATE TABLE
```sql
CREATE TABLE 테이블명 (
    컬럼명 데이터타입 [DEFAULT 값][NOT NULL],
    [PRIMARY KEY(기본키, ...)]
);
```

- 테이블을 생성하는 명령
- 각 컬럼은 '컬럼명 데이터타입 제약조건' 형식으로 정의

#### ALTER TABLE
```sql
ALTER TABLE 테이블명 ADD 컬럼명 데이터타입 [제약조건];
```

- 테이블에 새로운 컬럼을 추가하는 명령
- 컬럼 추가 시 제약조건을 함께 정의할 수 있음

#### DROP TABLE
```sql
DROP TABLE 테이블명 [CASCADE | RESTRICT];
```

- 테이블을 삭제하는 명령
- CASCADE: 참조하는 테이블까지 연쇄적으로 제거
- RESTRICT: 다른 테이블이 삭제할 테이블을 참조 중이면 제거하지 않음

#### TRUNCATE TABLE
```sql
TRUNCATE TABLE 테이블명;
```

- 테이블의 모든 데이터를 삭제하는 명령

### 4.3 뷰 관련 DDL

#### CREATE VIEW
```sql
CREATE VIEW 뷰이름 AS
조회쿼리;
```

- 뷰를 생성하는 명령
- 조회쿼리 결과를 뷰로 생성

#### DROP VIEW
```sql
DROP VIEW 뷰이름;
```

- 뷰를 삭제하는 명령

### 4.4 인덱스 관련 DDL

#### CREATE INDEX
```sql
CREATE [UNIQUE] INDEX 인덱스명 ON 테이블명(컬럼명1, 컬럼명2, …);
```

- 인덱스를 생성하는 명령
- UNIQUE: 중복 값을 허용하지 않는 인덱스

#### DROP INDEX
```sql
DROP INDEX 인덱스명;
```

- 인덱스를 삭제하는 명령
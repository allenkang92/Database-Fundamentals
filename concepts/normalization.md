데이터베이스 정규화

정규화

정규화의 개념

논리적 설계 단계에서 발생할 수 있는 종속으로 인한 이상 현상의 문제점을 해결하기 위해 함수적 종속성 등 종속성 이론을 통해 속성 간의 종속 관계를 분석하여 여러 개의 테이블(릴레이션)으로 분해하는 과정

정규화되는 과정을 정규형이라고 하며, 정규형의 종류로는 제1정규형, 제2정규형, 제3정규형, BCNF, 제4정규형, 제5정규형 등이 있다.

좋은 데이터베이스 스키마를 생성하고 불필요한 데이터의 중복을 방지하여 정보 검색을 쉽게 할 수 있도록 한다.

정규화의 목적

데이터 구조의 안정성 최대화

중복 데이터의 최소화

수정 및 삭제 시 이상 현상 최소화

테이블 불일치 위험 간소화

효과적인 검색 알고리즘 생성 가능

정규화의 필요성

데이터의 저장 공간을 최소화한다

데이터의 불일치를 최소화한다

데이터의 구조를 안정시킨다

데이터의 삽입, 삭제, 갱신 시 이상 현상을 방지한다

정규화의 장점

정규화 수준이 높으면 유연한 데이터 구축이 가능하다

정규화 수준이 높으면 데이터의 정합성이 높아진다

정규화의 단점

정규화 수준이 높으면 물리적 접근이 복잡해진다

정규화 수준이 높으면 길이가 짧은 데이터 생성으로 많은 조인이 발생한다.

정규화 과정

비정규 릴레이션 → (도메인이 원자값만으로 구성) → 1NF

1NF → (부분적 함수 종속 제거) → 2NF

2NF → (이행적 함수 종속 제거) → 3NF

3NF → (결정자이면서 후보키가 아닌 함수 종속 제거) → BCNF

BCNF → (다치 종속 제거) → 4NF

4NF → (조인 종속성 제거) → 5NF

제1정규형

어떤 테이블에 속한 모든 도메인이 원자값(하나의 항목에는 중복된 값이 입력될 수 없음)만으로 되어 있는 테이블

모든 도메인이 각각의 튜플로 구성되도록, 즉 원자값만으로 구성되도록 분해하는 과정을 제1정규형(1NF)이라고 한다.

제2정규형

제1정규형을 만족하고, 테이블에 내재된 부분 함수적 종속을 제거하여 완전 함수적 종속이 되도록 테이블을 분해하는 단계

기본키가 아닌 속성 모두 기본키에 완전 함수 종속이 되도록 부분 함수적 종속에 해당하는 속성을 별도의 테이블로 분리한다.

제3정규형

제1, 2정규형을 만족하고 속성 간 이행적 함수 종속을 제거한다.

기본키에 의존하지 않고 일반 열에 의존하는 열이 있다면 이를 제거해야 한다.

BCNF(보이스-코드) 정규형

결정자가 후보키가 아닌 함수 종속 제거

비결정자에 의한 함수적 종속 제거

비식별자 속성 간의 종속 제거

결정자이면서 후보키가 아닌 것 제거

제1, 2, 3정규형을 만족하고, 결정자가 후보키가 아닌 함수 종속이 제거되면 보이스-코드 정규형에 속한다.

후보키를 여러 개 가지고 있는 테이블에서 발생할 수 있는 이상 현상을 해결하기 위해 제3정규형보다 좀 더 강력한 제약 조건을 적용한다.

보이스-코드 정규형에 속하는 모든 테이블은 제3정규형에 속하지만, 제3정규형에 속하는 모든 테이블이 보이스-코드 정규형에 속하지는 않는다.

BCNF 정규형의 조건

모든 결정자에 대해 함수적 종속(X → Y)이 성립할 때는 X는 후보키이어야 한다

결정자는 어떤 속성의 값에 의해 다른 속성의 값을 결정하는 속성을 말한다

후보키는 유일하게 레코드를 식별할 수 있는 최소한의 속성 집합이다

함수적 종속은 한 속성의 값에 의해 다른 속성의 값을 유일하게 결정할 수 있는 관계를 의미한다.

함수적 종속성 X → Y는 X의 각 값에 대해 Y의 값이 유일하게 결정되는 것을 의미한다

후보키가 아닌 속성이 결정자로 존재하면 BCNF를 위반하는 것이다.

제4정규형

제1, 2, 3정규형을 만족하고, 다가(다치) 종속을 제거한다.

다치 종속은 최소 3개의 속성이 존재할 때, 다른 하나의 속성에 독립적으로 두 속성이 1:N의 종속 관계를 갖는 것을  말한다.

다치 종속성(Multi Valued Dependency, MVD)는 하나의 테이블에서 다치 종속이 두 개 이상 존재할 때 발생한다.

제5정규형

제1, 2, 3, 4정규형을 만족하고, 후보키를 통하지 않은 조인 종속을 제거한다.

정규형의 최상위 단계이고, 이 이상은 테이블을 분해해도 의미가 없다.

조인 종속

어떤 테이블을 분해한 다음에 조인해서 다시 원래의 테이블로 복원할 수 있는 성질을 의미한다.

4NF 결과 테이블을 조인해보면 다음과 같이 원래 테이블로 복원되는 것을 확인할 수 있다.

제4, 5정규형은 BCNF를 만족하지 않아도 된다

BCNF는 강한 제3정규형이므로 제3정규형을 만족하면 제4, 5정규형을 진행할 수 있다.

무손실 조인과 비부가적 조인

무손실 조인

하나의 테이블을 여러 개로 분해한 뒤 공통 식별자 속성으로 조인하여 데이터 손실 없이 원래의 테이블로 복원할 수 있는 경우

비부가적 조인

조인 결과에 원래 테이블에 없는 데이터(가짜 튜플)가 존재하지 않는 경우